# API (Application Programming Interfacd)
- 他社が提供する service 内の情報や機能を扱える様にする仕組み
### API を叩くとは？
- 例)
  - **ぐるなびAPI**
    - ぐるなびが提供する service や機能を扱える様にする仕組み
  - **API使用者**
    - 使用したい情報をリクエストする(大阪、串揚げ、人気...)
### Web API
- HTTP/HTTPS ベースで実現する API
- Web を介して使用する API
### REST API
- **RESTful API(REST API)**
  - 「RESTの原則」の原則に従って実装されているAPI
  - API を効果的に活用
  - 多くの API で用いられている原則・ルール
- **REST**
  - REpresentational State Transfer
  - 4つの原則から成り立っている
1. アドレス可能性
   - URIを通してリソースを単的に表現できる事ができる
   - **全てが一意なURIで機能を表現できる事**
 - URI : 広い概念
 - URL : URIの中の一部
   - URI,URL はほぼ同じ様なもの
2. ステートレス性
   - 全てのリクエストが完全に分離していて、セッションなどが行われない事
   - １回目と２回目のリクエストは完全に独立しており、**リクエスト間では影響は与えない**
3. 接続性
   - 情報に「別の情報のリンク」を含める事ができることを指し、**リンクを含める事で別の情報に接続する事が可能になる**
4. 統一インターフェイス
   - 情報の取得、作成、更新、**削除といった操作一式は全てHTTPメソッドを利用**
## API を活用するメリット・デメリット
### メリット
1. 開発の効率化（コスト削減）
   - 全ての機能を用意する必要がない為、開発にかかる時間、コスト削減
   - 特定の領域に特化した企業が API を提供している場合が多く、ハイクオリティな機能を実装できる
2. セキュリティ・顧客満足度の工場
   - さまざまな dataや機能を自社で保有する事なく活用でき、セキュリティめんでの向上を図る事ができる
   - 低コストで機能を実装でき、価格を抑えるて service を提供する事ができる
 - 例）Amazon Pay
   - amazon に login するだけで、決済を済ませる事ができる
   - card,住所などの情報を打ち込む事が無くなる
   - card の個人情報を保有する必要がない、というセキュリティ面でのメリット
   - user の入力の手間を省く(CV：コンバージョン率向上)
3. システム変更による影響の最小化
   - 自社でさまざまな機能を実装している場合、何かの仕様変更を元に大部分を書き換えなければならないケースがある。 API だとその影響が最小限で済む
   - **Webスクレーピングを用いた機能実装した場合**
     - EC site から Webスクレイピングを行なって、service を作り上げた際に、EC site の仕様が変わるたびに code の書き換えが発生
     - 取得したい情報がいつの間にか無くなっていたり、場所が変わっている、仕様変更による影響を小さくする為に API を用いる必要性がでてくる
### デメリット
   - API に依存してしまう
     - 料金体系の変更や API 提供の中止によって service が成り立たなくなってしまう場合や API の仕様変更などで不具合が生じてしまう場合がある
     - 自社 server に問題がなくても、API 提供側の server に障害が発生すると利用できなくなってしまう
## API エコノミー
   - API を活用して広がる経済圏の事
   - API 公開によって自社だけでなく、他社 service との連携により広がっていく商圏(経済圏)
### API 活用例
   - マネーフォアード,Moneytree ... 等
     - 家計簿App
     - 各銀行が保有する個人口座情報を API として提供し、各 service がこの API を活用する事で成り立っている
   - オンライン決済 service
     - Strioe, PAY.JP ...等
       - user 側メリット
         - 決済業者の page に移動しなくて良い(page 遷移がない)
         - よく見かける決済画面(決済API)の為安心感がある
       - service 提供側
         - 自社で決済システムを用意する必要がない
         - シンプルな記述で決裁システムを実装可能
         - API を介しての決済の為、リスクの高い個人情報を管理する必要がなくなる
## 企業が API を提供する理由
- 企業が API を公開するメリットとは？
1. service 連携しビジネスの拡大ができる
   - API を公開していれば、service 間、company 間での連携をスムーズに進める事ができる
   - service の流通のチャンネルを増やす事ができる
2. 技術を black box 化したまま収益拡大
   - API リクエスト数単位などで従量課金
   - API 使用に対する対価を受け取る様なビジネスが実現
   - google , Micro soft がいい例
     - 素晴らしい service を技術(ロジック、アルゴリズムetc...)、根幹となるモノを公開する事なく、ビジネスを成立させる事ができる
     - 簡単に言うと一人勝ち(悪く言えば独占)
## API を叩く上で必要な情報
 - API に接続する情報
   - service に接続する為の URL である API エンドポイント
   - 接続に必要な ID 的な要素、 API key が必要
 - API に送信する情報
   - 基本的には各 API のドキュメントに細かく記載されている
   1. どの HTTPメソッドを使用するか
       - 主に POST, GET を使用する
   2. < header >には data の種類や、 API key などの認証情報を記載
   3. < body >には JSON 形式で、送受信したい情報(data)を記載
## JSON を理解する
- JavaScript Object Notation
  - javascript の object の表記方法を元にした data format であり、XML などと同様の text base の data format
### HTTPメソッド
- API(使用者)/user が行いたい処理を server側(API側)に伝えるという役割
- 目的を明確にするのが HTTPメソッド
  1. data を取得したい
  2. data を作成したい
  3. data を削除したい
### よく使用する HTTPメソッドは4つ
### GET
  - data の取得に用いる
    - web page や API からの data 取得
    - css file や javascript file といった data 取得
### POST
  - data の作成に用いる
    - form から data 送信
    - account の新規作成
    - 新規 data を作成
### PUT
  - data の更新に用いる
    - 既存 data の編集
    - account やツィート情報、SNS でのコメントなどの編集
### DELETE
  - data の削除に用いる
    - data の削除
    - account や blog 記事、その他様々な data を削除する
